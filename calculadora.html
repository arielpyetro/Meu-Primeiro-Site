<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Calculadora Avançada - Ariel</title>
<style>
  * { box-sizing: border-box; }
  body {
    background: linear-gradient(135deg, #2e0652, #3a0ca3);
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    color: #eee;
    margin: 0; padding: 20px;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  h1 {
    font-weight: 900;
    font-size: 3rem;
    margin-bottom: 15px;
    text-shadow: 0 0 10px #9f86c0;
    user-select: none;
  }
  .tabs {
    display: flex;
    background: rgba(255,255,255,0.1);
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 0 12px #9f86c0aa;
    margin-bottom: 30px;
    width: 100%;
    max-width: 480px;
  }
  .tab {
    flex: 1;
    padding: 15px 0;
    text-align: center;
    cursor: pointer;
    font-weight: 600;
    font-size: 1.25rem;
    color: #cfccee;
    transition: background 0.3s ease, color 0.3s ease;
    user-select: none;
  }
  .tab.active {
    background: #7b52ff;
    color: white;
    box-shadow: inset 0 -4px 0 #d0bfff;
  }
  .content {
    background: rgba(0,0,0,0.15);
    border-radius: 16px;
    width: 100%;
    max-width: 480px;
    box-shadow: 0 0 15px #7b52ff88;
    padding: 25px 20px 30px 20px;
    min-height: 450px;
    position: relative;
    display: none;
    flex-direction: column;
    gap: 14px;
  }
  .content.active { display: flex; }
  #basica input#display {
    width: 100%;
    font-size: 2.5rem;
    padding: 12px 15px;
    border-radius: 12px;
    border: none;
    margin-bottom: 20px;
    background: rgba(255,255,255,0.15);
    color: #eee;
    text-align: right;
    box-shadow: inset 0 0 8px #a287ffaa;
    user-select: text;
  }
  #basica .grid-buttons {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 14px;
  }
  #basica button {
    padding: 16px 0;
    font-size: 1.5rem;
    font-weight: 600;
    border-radius: 14px;
    border: none;
    color: white;
    background: #7b52ff;
    box-shadow: 0 5px 0 #5a38c8;
    transition: background 0.3s, transform 0.1s;
    cursor: pointer;
    user-select: none;
  }
  #basica button:active {
    transform: translateY(3px);
    box-shadow: none;
  }
  #basica button.limpar {
    background: #f44336;
    box-shadow: 0 5px 0 #a33027;
  }
  #basica button.equal {
    background: #4caf50;
    box-shadow: 0 5px 0 #397d35;
    margin-top: 20px;
    width: 100%;
    border-radius: 20px;
    font-size: 2rem;
  }
  #avancada button {
    padding: 14px 0;
    border-radius: 12px;
    border: none;
    background: #6a44f4;
    color: white;
    font-size: 1.2rem;
    font-weight: 700;
    box-shadow: 0 4px 0 #4b30b2;
    cursor: pointer;
    transition: background 0.3s ease;
    user-select: none;
  }
  #avancada button:hover {
    background: #824dff;
  }
  #graficoContainer {
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    width: 90%;
    max-width: 440px;
    background: rgba(255,255,255,0.1);
    padding: 12px;
    border-radius: 14px;
    box-shadow: 0 0 12px #824dffbb;
    display: none;
  }
  canvas {
    width: 100% !important;
    height: 250px !important;
  }
  .top-left-nav {
    position: fixed;
    top: 20px;
    left: 30px;
    z-index: 999;
    display: flex;
    gap: 20px;
    font-family: 'Arial', sans-serif;
  }
  .top-left-nav a {
    color: #bbb;
    text-decoration: none;
    font-weight: 500;
    transition: color 0.3s ease;
    background: rgba(255, 255, 255, 0.05);
    padding: 8px 14px;
    border-radius: 8px;
  }
  .top-left-nav a:hover {
    color: #fff;
    background: rgba(255, 255, 255, 0.1);
  }
  .lang-container {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 999;
  }
</style>
</head>
<body>

<h1 id="titulo">Calculadora Avançada</h1>

<div class="tabs">
  <div class="tab active" data-tab="basica">Básica</div>
  <div class="tab" data-tab="avancada">Avançada</div>
</div>

<nav class="top-left-nav">
  <a href="index.html" id="menuInicio">Início</a>
  <a href="projetos.html" id="menuProjetos">Meus Projetos</a>
</nav>

<div id="basica" class="content active">
  <input type="text" id="display" readonly autocomplete="off" spellcheck="false" />
  <div class="grid-buttons">
    <button data-val="7">7</button>
    <button data-val="8">8</button>
    <button data-val="9">9</button>
    <button data-val="/">÷</button>

    <button data-val="4">4</button>
    <button data-val="5">5</button>
    <button data-val="6">6</button>
    <button data-val="*">×</button>

    <button data-val="1">1</button>
    <button data-val="2">2</button>
    <button data-val="3">3</button>
    <button data-val="-">−</button>

    <button class="limpar" id="clear">C</button>
    <button data-val="0">0</button>
    <button data-val=".">.</button>
    <button data-val="+">+</button>
  </div>
  <button class="equal" id="equals">=</button>
</div>

<div id="avancada" class="content">
  <button id="equacao1GrauBtn">Equação 1º Grau</button>
  <button id="equacao2GrauBtn">Equação 2º Grau</button>
  <button id="sistemaLinearBtn">Sistema Linear 2x2</button>
  <button id="exponencialLogBtn">Exponencial / Logaritmo</button>
  <button id="regraDe3Btn">Regra de 3</button>
  <button id="porcentagemBtn">Porcentagem</button>
  <button id="graficoFuncao2GrauBtn">Gráfico função 2º Grau</button>

  <div id="graficoContainer">
    <canvas id="grafico"></canvas>
  </div>
</div>

<div class="lang-container">
  <select id="langSelector" aria-label="Selecionar idioma">
    <option value="pt">Português</option>
    <option value="es">Español</option>
    <option value="en">English</option>
  </select>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const translations = {
    pt: {
      menuInicio: "Início",
      menuProjetos: "Meus Projetos",
      titulo: "Calculadora Avançada",
      tabBasica: "Básica",
      tabAvancada: "Avançada",
      limpar: "C",
      igual: "=",
      equacao1Grau: "Equação 1º Grau",
      equacao2Grau: "Equação 2º Grau",
      sistemaLinear: "Sistema Linear 2x2",
      exponencialLog: "Exponencial / Logaritmo",
      regraDe3: "Regra de 3",
      porcentagem: "Porcentagem",
      graficoFuncao2Grau: "Gráfico função 2º Grau",
      promptA: "Valor de a:",
      promptB: "Valor de b:",
      promptC: "Valor de c:",
      promptA1: "Valor a1:",
      promptB1: "Valor b1:",
      promptC1: "Valor c1:",
      promptA2: "Valor a2:",
      promptB2: "Valor b2:",
      promptC2: "Valor c2:",
      promptBaseExp: "Base:",
      promptExpoente: "Expoente:",
      promptValorLog: "Valor:",
      promptBaseLog: "Base (deixe vazio para ln):",
      promptX1: "Valor 1:",
      promptY1: "Valor 2:",
      promptX2: "Valor 3:",
      alertNao1Grau: "Não é equação do 1º grau (a=0)",
      alertSemRaizes: "Sem raízes reais",
      alertRaizUnica: "Raiz única: x =",
      alertRaizes: "x1 =",
      alertRaizes2: "x2 =",
      alertSistemaSemSolucao: "Sistema sem solução única",
      alertResultadoRegra3: "Resultado:",
      alertPorcentagem: "Porcentagem de",
      inputInvalido: "Entrada inválida",
      escolhaInvalida: "Escolha inválida"
    },
    es: {
      menuInicio: "Inicio",
      menuProjetos: "Mis Proyectos",
      titulo: "Calculadora Avanzada",
      tabBasica: "Básica",
      tabAvancada: "Avanzada",
      limpar: "C",
      igual: "=",
      equacao1Grau: "Ecuación 1º Grado",
      equacao2Grau: "Ecuación 2º Grado",
      sistemaLinear: "Sistema Lineal 2x2",
      exponencialLog: "Exponencial / Logaritmo",
      regraDe3: "Regla de 3",
      porcentagem: "Porcentaje",
      graficoFuncao2Grau: "Gráfico función 2º Grado",
      promptA: "Valor de a:",
      promptB: "Valor de b:",
      promptC: "Valor de c:",
      promptA1: "Valor a1:",
      promptB1: "Valor b1:",
      promptC1: "Valor c1:",
      promptA2: "Valor a2:",
      promptB2: "Valor b2:",
      promptC2: "Valor c2:",
      promptBaseExp: "Base:",
      promptExpoente: "Exponente:",
      promptValorLog: "Valor:",
      promptBaseLog: "Base (dejar vacío para ln):",
      promptX1: "Valor 1:",
      promptY1: "Valor 2:",
      promptX2: "Valor 3:",
      alertNao1Grau: "No es ecuación de 1º grado (a=0)",
      alertSemRaizes: "Sin raíces reales",
      alertRaizUnica: "Raíz única: x =",
      alertRaizes: "x1 =",
      alertRaizes2: "x2 =",
      alertSistemaSemSolucao: "Sistema sin solución única",
      alertResultadoRegra3: "Resultado:",
      alertPorcentagem: "Porcentaje de",
      inputInvalido: "Entrada inválida",
      escolhaInvalida: "Opción inválida"
    },
    en: {
      menuInicio: "Home",
      menuProjetos: "My Projects",
      titulo: "Advanced Calculator",
      tabBasica: "Basic",
      tabAvancada: "Advanced",
      limpar: "C",
      igual: "=",
      equacao1Grau: "1st Degree Equation",
      equacao2Grau: "2nd Degree Equation",
      sistemaLinear: "2x2 Linear System",
      exponencialLog: "Exponential / Logarithm",
      regraDe3: "Rule of Three",
      porcentagem: "Percentage",
      graficoFuncao2Grau: "2nd Degree Function Graph",
      promptA: "Value of a:",
      promptB: "Value of b:",
      promptC: "Value of c:",
      promptA1: "Value a1:",
      promptB1: "Value b1:",
      promptC1: "Value c1:",
      promptA2: "Value a2:",
      promptB2: "Value b2:",
      promptC2: "Value c2:",
      promptBaseExp: "Base:",
      promptExpoente: "Exponent:",
      promptValorLog: "Value:",
      promptBaseLog: "Base (leave empty for ln):",
      promptX1: "Value 1:",
      promptY1: "Value 2:",
      promptX2: "Value 3:",
      alertNao1Grau: "Not a 1st degree equation (a=0)",
      alertSemRaizes: "No real roots",
      alertRaizUnica: "Single root: x =",
      alertRaizes: "x1 =",
      alertRaizes2: "x2 =",
      alertSistemaSemSolucao: "System has no unique solution",
      alertResultadoRegra3: "Result:",
      alertPorcentagem: "Percentage of",
      inputInvalido: "Invalid input",
      escolhaInvalida: "Invalid choice"
    }
  };

  let lang = localStorage.getItem('lang') || 'pt';

  const langSelector = document.getElementById('langSelector');
  const menuInicio = document.getElementById('menuInicio');
  const menuProjetos = document.getElementById('menuProjetos');
  const titulo = document.getElementById('titulo');
  const tabs = document.querySelectorAll('.tab');
  const clearBtn = document.getElementById('clear');
  const equalsBtn = document.getElementById('equals');

  const equacao1GrauBtn = document.getElementById('equacao1GrauBtn');
  const equacao2GrauBtn = document.getElementById('equacao2GrauBtn');
  const sistemaLinearBtn = document.getElementById('sistemaLinearBtn');
  const exponencialLogBtn = document.getElementById('exponencialLogBtn');
  const regraDe3Btn = document.getElementById('regraDe3Btn');
  const porcentagemBtn = document.getElementById('porcentagemBtn');
  const graficoFuncao2GrauBtn = document.getElementById('graficoFuncao2GrauBtn');

  function updateTexts() {
    menuInicio.innerText = translations[lang].menuInicio;
    menuProjetos.innerText = translations[lang].menuProjetos;
    titulo.innerText = translations[lang].titulo;

    tabs[0].innerText = translations[lang].tabBasica;
    tabs[1].innerText = translations[lang].tabAvancada;

    clearBtn.innerText = translations[lang].limpar;
    equalsBtn.innerText = translations[lang].igual;

    equacao1GrauBtn.innerText = translations[lang].equacao1Grau;
    equacao2GrauBtn.innerText = translations[lang].equacao2Grau;
    sistemaLinearBtn.innerText = translations[lang].sistemaLinear;
    exponencialLogBtn.innerText = translations[lang].exponencialLog;
    regraDe3Btn.innerText = translations[lang].regraDe3;
    porcentagemBtn.innerText = translations[lang].porcentagem;
    graficoFuncao2GrauBtn.innerText = translations[lang].graficoFuncao2Grau;
  }

  langSelector.value = lang;
  updateTexts();

  langSelector.addEventListener('change', e => {
    lang = e.target.value;
    localStorage.setItem('lang', lang);
    updateTexts();
  });

  tabs.forEach(tab => {
    tab.addEventListener('click', () => {
      tabs.forEach(t => t.classList.remove('active'));
      tab.classList.add('active');

      if(tab.dataset.tab === 'basica'){
        document.getElementById('basica').classList.add('active');
        document.getElementById('avancada').classList.remove('active');
        document.getElementById('graficoContainer').style.display = 'none';
      } else {
        document.getElementById('basica').classList.remove('active');
        document.getElementById('avancada').classList.add('active');
      }
    });
  });

  const display = document.getElementById('display');

  document.querySelectorAll('#basica button[data-val]').forEach(btn => {
    btn.addEventListener('click', () => {
      display.value += btn.dataset.val;
    });
  });

  clearBtn.addEventListener('click', () => {
    display.value = '';
  });

  equalsBtn.addEventListener('click', () => {
    try {
      if(/[^0-9+\-*/.() ]/.test(display.value)) {
        display.value = translations[lang].inputInvalido;
        return;
      }
      let result = eval(display.value);
      display.value = result;
    } catch {
      display.value = translations[lang].inputInvalido;
    }
  });

  function promptNum(msg) {
    let val = prompt(msg);
    if(val === null) throw 'cancel';
    if(val.trim() === '' || isNaN(Number(val))) throw translations[lang].inputInvalido;
    return Number(val);
  }

  equacao1GrauBtn.addEventListener('click', () => {
    try {
      const a = promptNum(translations[lang].promptA);
      const b = promptNum(translations[lang].promptB);
      if(a === 0) {
        alert(translations[lang].alertNao1Grau);
        return;
      }
      const x = -b / a;
      alert(`${translations[lang].alertRaizUnica} ${x}`);
    } catch (e) {
      if(e !== 'cancel') alert(e);
    }
  });

  equacao2GrauBtn.addEventListener('click', () => {
    try {
      const a = promptNum(translations[lang].promptA);
      const b = promptNum(translations[lang].promptB);
      const c = promptNum(translations[lang].promptC);
      if(a === 0) {
        alert(translations[lang].alertNao1Grau);
        return;
      }
      const delta = b * b - 4 * a * c;
      if(delta < 0) {
        alert(translations[lang].alertSemRaizes);
        return;
      }
      if(delta === 0) {
        const x = -b / (2 * a);
        alert(`${translations[lang].alertRaizUnica} ${x}`);
        return;
      }
      const x1 = (-b + Math.sqrt(delta)) / (2 * a);
      const x2 = (-b - Math.sqrt(delta)) / (2 * a);
      alert(`${translations[lang].alertRaizes} ${x1}\n${translations[lang].alertRaizes2} ${x2}`);
    } catch (e) {
      if(e !== 'cancel') alert(e);
    }
  });

  sistemaLinearBtn.addEventListener('click', () => {
    try {
      const a1 = promptNum(translations[lang].promptA1);
      const b1 = promptNum(translations[lang].promptB1);
      const c1 = promptNum(translations[lang].promptC1);
      const a2 = promptNum(translations[lang].promptA2);
      const b2 = promptNum(translations[lang].promptB2);
      const c2 = promptNum(translations[lang].promptC2);
      const det = a1 * b2 - a2 * b1;
      if(det === 0) {
        alert(translations[lang].alertSistemaSemSolucao);
        return;
      }
      const x = (c1 * b2 - c2 * b1) / det;
      const y = (a1 * c2 - a2 * c1) / det;
      alert(`x = ${x}\ny = ${y}`);
    } catch (e) {
      if(e !== 'cancel') alert(e);
    }
  });

  exponencialLogBtn.addEventListener('click', () => {
    try {
      const escolha = prompt(`${translations[lang].exponencialLog}:\n1 - Exponencial\n2 - Logaritmo`);
      if(escolha === null) return;
      if(escolha.trim() === '') throw translations[lang].inputInvalido;

      if(escolha === '1') {
        const base = promptNum(translations[lang].promptBaseExp);
        const expoente = promptNum(translations[lang].promptExpoente);
        const resultado = Math.pow(base, expoente);
        alert(`Resultado: ${resultado}`);
      } else if(escolha === '2') {
        const valor = promptNum(translations[lang].promptValorLog);
        const base = prompt(translations[lang].promptBaseLog);
        let resultado;
        if(base === null) return;
        if(base.trim() === '') {
          resultado = Math.log(valor);
        } else if(!isNaN(Number(base)) && Number(base) > 0) {
          resultado = Math.log(valor) / Math.log(Number(base));
        } else {
          alert(translations[lang].inputInvalido);
          return;
        }
        alert(`Resultado: ${resultado}`);
      } else {
        alert(translations[lang].escolhaInvalida);
      }
    } catch (e) {
      if(e !== 'cancel') alert(e);
    }
  });

  regraDe3Btn.addEventListener('click', () => {
    try {
      const x1 = promptNum(translations[lang].promptX1);
      const y1 = promptNum(translations[lang].promptY1);
      const x2 = promptNum(translations[lang].promptX2);
      const resultado = (y1 * x2) / x1;
      alert(`${translations[lang].alertResultadoRegra3} ${resultado}`);
    } catch (e) {
      if(e !== 'cancel') alert(e);
    }
  });

  porcentagemBtn.addEventListener('click', () => {
    try {
      const total = promptNum('Total:');
      const parte = promptNum('Parte:');
      const resultado = (parte / total) * 100;
      alert(`${translations[lang].alertPorcentagem} ${resultado.toFixed(2)}%`);
    } catch (e) {
      if(e !== 'cancel') alert(e);
    }
  });

  graficoFuncao2GrauBtn.addEventListener('click', () => {
    try {
      const a = promptNum(translations[lang].promptA);
      const b = promptNum(translations[lang].promptB);
      const c = promptNum(translations[lang].promptC);

      if(a === 0) {
        alert(translations[lang].alertNao1Grau);
        return;
      }

      const ctx = document.getElementById('grafico').getContext('2d');
      const dataPoints = [];
      for(let x = -20; x <= 20; x += 0.5) {
        const y = a*x*x + b*x + c;
        dataPoints.push({x: x, y: y});
      }

      if(window.graficoInstance) {
        window.graficoInstance.destroy();
      }

      window.graficoInstance = new Chart(ctx, {
        type: 'line',
        data: {
          datasets: [{
            label: translations[lang].graficoFuncao2Grau,
            data: dataPoints,
            borderColor: '#d4bfff',
            backgroundColor: 'rgba(151, 111, 255, 0.3)',
            pointRadius: 0,
            borderWidth: 3,
            fill: true,
            tension: 0.2,
          }]
        },
        options: {
          scales: {
            x: {
              type: 'linear',
              title: { display: true, text: 'x' },
              min: -20,
              max: 20,
              ticks: { stepSize: 5 }
            },
            y: {
              title: { display: true, text: 'y' },
              beginAtZero: false,
            }
          },
          animation: {
            duration: 700,
            easing: 'easeInOutQuad',
          },
          plugins: {
            legend: {
              labels: { color: '#d4bfff' }
            }
          },
          responsive: true,
          maintainAspectRatio: false
        }
      });

      document.getElementById('graficoContainer').style.display = 'block';

    } catch (e) {
      if(e !== 'cancel') alert(e);
    }
  });

</script>
<style>
.lang-container select {
  background: rgba(255, 255, 255, 0.1);
  color: #eee;
  border: none;
  padding: 8px 12px;
  border-radius: 12px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  box-shadow: 0 0 10px #7b52ff88;
  transition: background 0.3s ease, color 0.3s ease;
  user-select: none;
  -webkit-appearance: none;  
  -moz-appearance: none;     
  appearance: none;
  background-image: url('data:image/svg+xml;utf8,<svg fill="%23eee" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/></svg>');
  background-repeat: no-repeat;
  background-position: right 12px center;
  background-size: 16px 16px;
}

.lang-container select option {
  background-color: #1a0b3d;
  color: #eee;
}

.lang-container select option:hover {
  background-color: #7b52ff;
  color: white;
}

.lang-container select:hover {
  background: rgba(255, 255, 255, 0.2);
  color: #fff;
}

</style>
</body>
</html>
